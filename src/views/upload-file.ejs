
<!DOCTYPE html>
<html>
    <head>
        <title>Dencrypter/Home</title>
        <link href="/stylesheets/style.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Oh hi mark ! </h1>
        <h1>Welcome to Dencrypter, the most visited site in 2025 !! </h1>


        <html>
  <head>
    <script src="script.js"></script>
    <script type="text/javascript" src="hybrid-crypto.min.js"></script>

  </head>

  <body onload="init()">
    <input id="fileInput" type="file" name="file" />
    <pre id="fileContent"></pre>
  </body>
</html>
<script>
function init(){
  document.getElementById('fileInput').addEventListener('change', handleFileSelect, false);
}

function handleFileSelect(event){
  const reader = new FileReader()
  reader.onload = handleFileLoad;
  reader.readAsText(event.target.files[0])
}

function handleFileLoad(event){
  console.log(event);
  var filename = fileInput.value.replace(/^.*[\\\/]/, '');
  alert(filename);
  var testObject = event.target.result;
  localStorage.setItem('testObject', JSON.stringify(testObject));
  var retrievedObject = JSON.parse(localStorage.getItem('testObject'));
  console.log('retrievedObject: ', retrievedObject);

  alert(retrievedObject);
  //not operating
  var crypt = new Crypt();
  var rsa = new RSA();

  rsa.generateKeyPair(function(keyPair) {
    var publicKey = keyPair.publicKey;
    var privateKey = keyPair.privateKey;
    
    var data = event.target.result;
    //encrypting data
    var encrypted = crypt.encrypt(publicKey, data);

    //upload them to server?

    //saving keys to local storage
    localStorage.setItem(fileName+"PublicKey", JSON.stringify(publicKey));
    localStorage.setItem(fileName+"PrivateKey", JSON.stringify(privateKey));
  });
  function decrypt(){
    //get data(encrypted) from server? extract data name (fileName)
    var privateKey = JSON.parse(localStorage.getItem(fileName+"PrivateKey"));
    var decrypted = crypt.decrypt(privateKey, encrypted);
    var message = decrypted.message;
    //download message??
    return message;


  }

}
</script>



